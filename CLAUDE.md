è¿™æ˜¯ shellRaining çš„åšå®¢ä»“åº“ï¼Œè¯¥åšå®¢ä½¿ç”¨ vitepress æ­å»ºï¼ˆä¸€ä¸ªé™æ€åšå®¢æ¡†æ¶ï¼‰ï¼Œå¹¶ä½¿ç”¨ Vue ä¹¦å†™åšå®¢çš„è‡ªå®šä¹‰ä¸»é¢˜ã€‚

## é¡¹ç›®ç»“æ„

è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªä½¿ç”¨ Lerna ç®¡ç†çš„ monorepoï¼Œå…±æœ‰ä¸¤ä¸ªå­åŒ…ï¼Œ`theme` å’Œ `content`ã€‚å‰è€…æ˜¯ä¹¦å†™è‡ªå®šä¹‰ vitepress ä¸»é¢˜çš„åœ°æ–¹ï¼Œåè€…æ˜¯ä¹¦å†™åšå®¢æ­£æ–‡çš„åœ°æ–¹ã€‚é¡¹ç›®ä½¿ç”¨ pnpm ä½œä¸ºåŒ…ç®¡ç†å™¨ï¼Œé€šè¿‡ workspace å’Œ Lerna å®ç°åŒ…ä¾èµ–ç®¡ç†å’Œç‰ˆæœ¬æ§åˆ¶ã€‚

### theme å­åŒ…

ç”±äº vitepress æ˜¯ä¸€ä¸ª SSG æ¡†æ¶ï¼Œä»–ç”Ÿæˆçš„é¡µé¢æ˜¯é¢„å…ˆæ¸²æŸ“çš„ï¼Œè€Œä¸ºäº†ä¿è¯é¡µé¢çš„çµæ´»æ€§ï¼Œvitepress å…è®¸æˆ‘ä»¬ç¼–å†™ä»…åœ¨å®¢æˆ·ç«¯è¿è¡Œçš„ä»£ç ï¼Œå› æ­¤åšå®¢ä¸»é¢˜å…·æœ‰ä¸¤éƒ¨åˆ†ï¼š

- `node`ï¼šç”¨æ¥æ”¾ç½®ç¼–è¯‘æ—¶é€»è¾‘
- `client`ï¼šç”¨æ¥æ”¾ç½®å®¢æˆ·ç«¯é€»è¾‘

### content å­åŒ…

è¿™ä¸ªå­åŒ…ä½¿ç”¨æ ‡å‡†çš„ vitepress åšå®¢ç»„ç»‡ç»“æ„

```
.
â”œâ”€â”€ .vitepress
â”‚Â Â  â”œâ”€â”€ config.ts     ç”¨æ¥æ”¾ç½®åšå®¢ç«™ç‚¹çº§åˆ«é…ç½®
â”‚Â Â  â”œâ”€â”€ theme         ç”¨æ¥æ”¾ç½®åšå®¢ä¸»é¢˜é…ç½®
â”‚Â Â  â””â”€â”€ dist          å­˜æ”¾åšå®¢æ„å»ºäº§ç‰©ï¼Œå¶å°”å¯ä»¥é€šè¿‡ä»–æ¥æ£€æŸ¥æ„å»ºç»“æœæ¥ debug
â”œâ”€â”€ docs
â”‚Â Â  â”œâ”€â”€ book          æ”¾ç½®è¯»ä¹¦æˆ–è€…ä¸€äº›ç³»åˆ—æ–‡ç« 
â”‚Â Â  â”œâ”€â”€ daily_life    æ”¾ç½®ä¸€äº›æ—¥å¸¸ç”Ÿæ´»å†™çš„æ–‡ç« ï¼Œæ¯”å¦‚æ¸¸è®°ï¼Œæ„Ÿæ‚Ÿç­‰
â”‚Â Â  â”œâ”€â”€ tech_blog     å­˜æ”¾ä¸€äº›ç®€å•çš„æŠ€æœ¯åšå®¢ï¼Œé€šå¸¸ä¸æ„æˆç³»åˆ—æ–‡ç« 
â”‚Â Â  â”œâ”€â”€ tools         å­˜æ”¾ä¸€äº›å·¥å…·çš„ä½¿ç”¨æ–¹æ³•
â”‚Â Â  â””â”€â”€ translation   å­˜æ”¾ä¸€äº›ç¿»è¯‘æ–‡ç« 
â””â”€â”€ public
    â””â”€â”€ fonts         å­˜æ”¾åšå®¢çš„è‡ªå®šä¹‰å­—ä½“ï¼Œç”¨æ¥ç¾åŒ–
```

## é¡¹ç›®åå¥½

æœ¬é¡¹ç›®æ¿€è¿›çš„ä½¿ç”¨æ‰€æœ‰æœ€æ–°çš„ä¾èµ–ï¼Œæ¯”å¦‚ vitepress ä½¿ç”¨æœª release çš„ v2 ç‰ˆæœ¬ï¼Œå…¶ä¾èµ–çš„ Vite ç‰ˆæœ¬ä¸º v7ï¼Œvueuse ä½¿ç”¨ v13ï¼ŒVue ä½¿ç”¨ 3.6 ç‰ˆæœ¬ã€‚

æœ¬é¡¹ç›®ä¸ºäº†ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œç§¯æä½¿ç”¨ä¾èµ–æ‰€æä¾›çš„ APIï¼Œè€Œä¸æ˜¯æ‰‹å†™è¾…åŠ©å‡½æ•°ï¼Œä»¥é¿å…äº§ç”Ÿé¢å¤–çš„ç»´æŠ¤è´Ÿæ‹…

## Lerna ç®¡ç†

é¡¹ç›®ä½¿ç”¨ Lerna v8 è¿›è¡Œ monorepo ç®¡ç†ï¼Œæä¾›ç®€åŒ–çš„å¼€å‘å‘½ä»¤ï¼š

### å¯ç”¨å‘½ä»¤

- `pnpm run dev` - å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆcontent åŒ…ï¼‰
- `pnpm run build` - æŒ‰é¡ºåºæ„å»ºæ‰€æœ‰åŒ…ï¼ˆtheme â†’ contentï¼‰
- `pnpm run preview` - é¢„è§ˆæ„å»ºç»“æœ
- `pnpm run test` - è¿è¡Œæµ‹è¯•ï¼ˆä»… theme åŒ…æœ‰æµ‹è¯•ï¼‰
- `pnpm run format` - ä»£ç æ ¼å¼åŒ–ï¼ˆéœ€è¦å„åŒ…é…ç½®æ ¼å¼åŒ–å·¥å…·ï¼‰
- `pnpm run clean` - æ¸…ç†æ„å»ºäº§ç‰©å’Œç¼“å­˜

### åŒ…ä¾èµ–å…³ç³»

- `@shellraining/content` ä¾èµ– `@shellraining/theme`
- ä½¿ç”¨ `workspace:*` åè®®ç®¡ç†å†…éƒ¨åŒ…ä¾èµ–
- é¡¹ç›®é‡‡ç”¨ç‹¬ç«‹ç‰ˆæœ¬æ§åˆ¶ï¼ˆindependent versioningï¼‰

## Git Worktree ç®¡ç†

é¡¹ç›®é…ç½®äº†å¤šä¸ª git worktree ç”¨äºå¹¶è¡Œå¼€å‘

- **main** - ä¸»å·¥ä½œåŒºï¼ˆå½“å‰ï¼‰
  - è·¯å¾„ï¼š`/Users/shellraining/Documents/shellraining-blog-workspace/main`
  - åˆ†æ”¯ï¼š`main`
- **camellia** - å±±èŒ¶èŠ±å·¥ä½œåŒº ğŸŒº
  - è·¯å¾„ï¼š`../camellia`
  - åˆ†æ”¯ï¼š`camellia`
- **rose** - ç«ç‘°å·¥ä½œåŒº ğŸŒ¹
  - è·¯å¾„ï¼š`../rose`
  - åˆ†æ”¯ï¼š`rose`
- **violet** - ç´«ç½—å…°å·¥ä½œåŒº ğŸŒ¸
  - è·¯å¾„ï¼š`../violet`
  - åˆ†æ”¯ï¼š`violet`

æ¯ä¸ª worktree éƒ½é…ç½®äº†ç‹¬ç«‹çš„ Claude Code è®¾ç½®ï¼ˆ`.claude/settings.local.json`ï¼‰ï¼Œå…·æœ‰ä¸ªæ€§åŒ–çš„ä»»åŠ¡å®Œæˆå£°éŸ³æç¤ºï¼Œä¾¿äºåœ¨å¤šå·¥ä½œåŒºç¯å¢ƒä¸‹å¿«é€Ÿè¯†åˆ«ä»»åŠ¡çŠ¶æ€ã€‚ä¸‰ä¸ªç”¨æ¥å¼€å‘çš„å­ä»“åº“ï¼ˆcamelliaã€roseã€violetï¼‰åœ¨è°ƒè¯•æ—¶çº¦å®šå¥½äº†ä»–ä»¬ä½¿ç”¨çš„ç«¯å£ï¼ˆæ‰§è¡Œ `pnpm run dev`ï¼‰ï¼Œåˆ†åˆ«æ˜¯ 5173ã€5174ã€5175 ç«¯å£

### Worktree æ•´åˆè„šæœ¬

- `scripts/rebase-worktrees-into-main.sh`ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰
  - ç”¨é€”ï¼šä¸ºæ¯ä¸ªé `main` åˆ†æ”¯è‡ªåŠ¨æäº¤æœªä¿å­˜æ›´æ”¹ï¼ˆå¯å…³é—­ï¼‰ï¼Œå°†å…¶ `rebase` åˆ° `main`ï¼Œæœ€ååœ¨ `main` ä¸ŠæŒ‰é¡ºåº `--ff-only` åˆå…¥ï¼›é‡åˆ°å†²çªä¼šä¸­æ–­å¹¶æç¤ºç»§ç»­æ­¥éª¤ã€‚
  - å¸¸ç”¨ï¼š
    - é¢„æ¼”ï¼š`bash scripts/rebase-worktrees-into-main.sh -n -v`
    - é»˜è®¤ï¼š`bash scripts/rebase-worktrees-into-main.sh`
    - æŒ‡å®šé¡ºåºï¼š`bash scripts/rebase-worktrees-into-main.sh --order camellia,rose,violet`
    - è‡ªå®šä¹‰æäº¤ä¿¡æ¯ï¼š`bash scripts/rebase-worktrees-into-main.sh -m "feat(content): sync BRANCH"`
    - åˆå…¥åæ¨é€ï¼š`bash scripts/rebase-worktrees-into-main.sh -p`
    - å…¶ä»–ï¼š`--no-commit`ã€`-b main`

- `scripts/rebase-worktrees-into-main-skip-errors.sh`ï¼ˆå®½å®¹æ¨¡å¼ï¼‰
  - ç”¨é€”ï¼šé€åˆ†æ”¯æ•´åˆã€‚æ¯åˆå…¥ä¸€ä¸ªåˆ†æ”¯åï¼Œä»¥â€œæ›´æ–°åçš„ `main`â€ä¸ºåŸºçº¿å¤„ç†ä¸‹ä¸€ä¸ªï¼›è‹¥å‡ºç°å†²çªï¼Œä¼šè‡ªåŠ¨ `rebase --abort` å¹¶è·³è¿‡è¯¥åˆ†æ”¯ï¼Œæœ€ç»ˆè¾“å‡ºæ•´åˆ/è·³è¿‡åˆ—è¡¨ã€‚
  - å¸¸ç”¨ï¼š
    - é¢„æ¼”ï¼š`bash scripts/rebase-worktrees-into-main-skip-errors.sh -n -v`
    - é»˜è®¤ï¼š`bash scripts/rebase-worktrees-into-main-skip-errors.sh`
    - æŒ‡å®šé¡ºåºï¼š`bash scripts/rebase-worktrees-into-main-skip-errors.sh --order camellia,rose,violet`
    - åˆå…¥åæ¨é€ï¼š`bash scripts/rebase-worktrees-into-main-skip-errors.sh -p`
    - å…¶ä»–ï¼š`--no-commit`ã€`-m`ã€`-b main`

æ³¨æ„ï¼šä¸¤ä¸ªè„šæœ¬éƒ½åŸºäº rebaseï¼Œä¸ä¼šäº§ç”Ÿ merge commitï¼›æ‰§è¡Œå‰è¯·ç¡®ä¿ `main` å·¥ä½œåŒºå¹²å‡€ï¼ˆæ— æœªæäº¤å˜æ›´ï¼‰ã€‚

## AI ä¿®æ”¹å‡†åˆ™

å¦‚æœä¿®æ”¹ä»£ç ï¼ˆæ¯”å¦‚æ·»åŠ åŠŸèƒ½æˆ–è€…é‡æ„ï¼‰åå¯¼è‡´æ–‡æ¡£å’Œä»£ç é€»è¾‘å‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µï¼Œè¯·ä½ é…Œæƒ…ä¿®æ”¹

è‹¥ä½ ä½¿ç”¨äº† `pnpm run dev` ç­‰å¯åŠ¨å¼€å‘æœåŠ¡å™¨çš„å‘½ä»¤ï¼Œè¯·**ä¸€å®š**åœ¨ä»»åŠ¡å®Œæˆæ—¶æ¸…é™¤æ‰å·²ç»å¯åŠ¨çš„å¼€å‘æœåŠ¡å™¨è¿›ç¨‹
